@startuml UC001_A1_Invalid_Credentials
!theme plain
skinparam sequenceArrowThickness 2
skinparam roundcorner 20
skinparam maxmessagesize 60
skinparam sequenceParticipant underline

title UC001 - Admin Login: Alternative Flow A1 - Invalid Credentials

actor Administrator
boundary "resources/views/auth/login.blade.php" as LoginView
control "app/Http/Controllers/Auth/AuthenticatedSessionController" as AuthController
entity "app/Models/User.php" as UserModel
database "users" as UserDB

Administrator -> LoginView: POST /login (invalid credentials)
LoginView -> AuthController: store(LoginRequest $request)

AuthController -> UserModel: where('email', $email)->first()
UserModel -> UserDB: SELECT * FROM users WHERE email = ?

alt User Not Found
    UserDB --> UserModel: No record found
    UserModel --> AuthController: null
    AuthController -> AuthController: throw ValidationException
else Wrong Password
    UserDB --> UserModel: Return user record
    UserModel --> AuthController: User object
    AuthController -> AuthController: Hash::check() fails
    AuthController -> AuthController: throw ValidationException
end

AuthController --> LoginView: ValidationException("Invalid email or password")
LoginView -> Administrator: Display error message
Administrator -> Administrator: Re-enter credentials

@enduml
